<h3 ng-show="user.isAuthenticated">Create a new character</h3>
<hr />

<h2 ng-hide="user.isAuthenticated">You have to <a href="#!/login">Log in</a> to create new character!</h2>

<div class="row">
    <div class="col-sm-10" ng-show="user.isAuthenticated">
        <input type="radio" ng-model="character.System" value="Warhammer" required ng-change="checkIfSystemSelected() || loadGameSystem()" /> Warhammer
        <input type="radio" ng-model="character.System" value="DungeonsAndDragons" required ng-change="checkIfSystemSelected()" /> Dungeons & Dragons
    </div>

    <p>Selected system is {{character.System}}</p>
    <p>{{isSystemSelected}}</p>

    <form class="form-horizontal" name="createForm" ng-submit="create()" ng-hide="isLoading || onSuccess || !isSystemLoaded" ng-show="user.isAuthenticated && isSystemLoaded">
        <div class="form-group" ng-class="{'has-error' : createForm.Name.$invalid && createForm.Name.$touched}">
            <label for="Name" class="col-sm-2 control-label">Name</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" name="Name" placeholder="Name" ng-model="character.Name" required>
                <span class="help-block" ng-show="createForm.Name.$error.required && createForm.Name.$touched">Name is required</span>
            </div>
        </div>
        <div class="form-group" ng-class="{'has-error' : createForm.Gender.$invalid && createForm.Gender.$touched}">
            <label for="Gender" class="col-sm-2 control-label">Gender</label>
            <div class="col-sm-10">
                <input type="radio" ng-model="character.Gender" name="Gender" value="Male" required /> Male
                <input type="radio" ng-model="character.Gender" name="Gender" value="Female" required /> Female
                <span class="help-block" ng-show="createForm.Gender.$error.required && createForm.Gender.$touched">Gender is required</span>
            </div>
        </div>
        <ng-form editable-form onaftersave="updateStatistics()">
            <div class="row">
                <table class="table table-bordered table-condensed" >
                    <tr>
                        <td ng-repeat="statistic in characterStatistics">{{statistic.Name}}</td>
                    </tr>
                    <tr>
                        <td  ng-repeat="statistic in characterStatistics">
                            <span editable-text="statistic.Value" e-name="name_{{statistic.Id}}" e-required>{{statistic.Value || 'empty'}}</span>
                        </td>
                    </tr>
                </table>
            </div>
 
        </ng-form>

        <div class="buttons">
            <!-- button to show form -->
            <button type="button" class="btn btn-primary pull-right" ng-click="editableForm.$show()" ng-show="!editableForm.$visible">Edit</button>
            <div class="text-center" ng-show="editableForm.$visible">
                <br />
                <button type="submit" class="btn btn-success pull-left" ng-disabled="editableForm.$waiting">Save</button>
                <button type="button" class="btn btn-danger pull-right" ng-disabled="editableForm.$waiting" ng-click="editableForm.$cancel()">Cancel</button>
            </div>
        </div>

        <div class="form-group">
            <div >
                <button type="submit" class="btn btn-primary">Create</button>
            </div>
        </div>
    </form>
</div>


<div ng-show="isLoading">Loading...</div>
<!--<div ng-show="onSuccess" class="alert alert-success" role="alert">Success!</div>-->


<br />
